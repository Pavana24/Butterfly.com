pipeline {
           agent any
           stages {
              stage('SonarQube Report') {
                 steps {
                     withSonarQubeEnv('SonarQube Scanner 4.2.0'){
                         sh 'mvn clean sonar:sonar -Dsonar.host.url=http://172.31.12.23:9000 -Dsonar.projectKey="pipelineproject" -Dsonar.sources=. -Dsonar.java.binaries=.'
                       }
                  }
               }
             stage('Junit with JOCOCO') {
                steps {
                   step([$class: 'JacocoPublisher', 
                   execPattern: 'target/*.exec',
                   classPattern: 'target/classes',
                   sourcePattern: 'src/main/java',
                   exclusionPattern: 'src/test*'
             ])
          }
       }
             stage('Maven Build') {
                steps {
                   sh 'mvn clean package'
             }
       }
        }
 }

